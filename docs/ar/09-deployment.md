<div align="center" dir="rtl">

# ğŸš€ 09 - Ø§Ù„Ù†Ø´Ø± Ùˆ DevOps

<img src="https://readme-typing-svg.demolab.com?font=Fira+Code&size=20&duration=3000&pause=1000&color=1EB8E4&center=true&vCenter=true&width=500&lines=Infrastructure+Architecture;CI/CD+Pipeline;Serverless+Deployment" alt="Typing"/>

> **Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ©ØŒ Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù†Ø´Ø±ØŒ ÙˆØ§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©**

<br/>

[![Prev](https://img.shields.io/badge/%E2%86%90_%D8%A7%D9%84%D8%A7%D8%AE%D8%AA%D8%A8%D8%A7%D8%B1-1eb8e4)](08-testing-quality.md)
[![Next: Results & Impact](https://img.shields.io/badge/Next_â†’_Results_%26_Impact-7565e3?style=for-the-badge)](10-results-impact.md)

</div>

<div align="center">
<img width="600" src="https://raw.githubusercontent.com/andreasbm/readme/master/assets/lines/rainbow.png"/>
</div>

<div dir="rtl">

---

## ğŸ—ï¸ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ©

ÙŠØ³ØªØ®Ø¯Ù… AstroShan **Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Serverless** Ø¹Ù„Ù‰ Vercel:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GitHub Repository                                          â”‚
â”‚        â”‚ push/merge                                          â”‚
â”‚        â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚   Vercel    â”‚â”€â”€â”€â”€ deploy â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Vercel Edge    â”‚    â”‚
â”‚   â”‚   Build     â”‚                    â”‚  Functions      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚        â”‚                                       â”‚             â”‚
â”‚        â–¼                                       â–¼             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚   Vercel    â”‚                    â”‚  MongoDB Atlas  â”‚    â”‚
â”‚   â”‚   Edge CDN  â”‚                    â”‚  Cloudinary CDN â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ø§Ù„ÙÙˆØ§Ø¦Ø¯

| Ø§Ù„Ù…ÙŠØ²Ø© | Ø§Ù„ÙˆØµÙ |
|:-------:|:------------|
| ğŸ”§ Ø¥Ø¯Ø§Ø±Ø© Ø®Ø§Ø¯Ù… ØµÙØ±ÙŠØ© | Ù„Ø§ Ø¨Ù†ÙŠØ© ØªØ­ØªÙŠØ© Ù„Ù„ØµÙŠØ§Ù†Ø© |
| ğŸŒ Ù†Ø´Ø± Edge Ø¹Ø§Ù„Ù…ÙŠ | Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ù† Ø£Ù‚Ø±Ø¨ Ù…Ù†Ø·Ù‚Ø© |
| ğŸ“ˆ ØªÙˆØ³Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ | Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø·ÙØ±Ø§Øª Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª |
| ğŸ”„ CI/CD Ù…Ø¯Ù…Ø¬ | Ù†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ù€ git push |

---

## ğŸ”§ Ø®Ø· Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù†Ø´Ø± (Deployment Pipeline)

### Ø³ÙŠØ± Ø¹Ù…Ù„ Git

```
main branch â”€â”€â”€â”€â”€â–º Production (astroshan.vercel.app)
develop branch â”€â–º Preview (develop-astroshan.vercel.app)
feature/* â”€â”€â”€â”€â”€â”€â–º Preview ([branch]-astroshan.vercel.app)
```

### Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø¨ÙŠØ¦Ø§Øª

| Ø§Ù„Ø¨ÙŠØ¦Ø© | Ø§Ù„ÙØ±Ø¹ | Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (URL) | Ø§Ù„ØºØ±Ø¶ |
|:-----------:|:------:|:---:|:--------|
| Ø§Ù„Ø¥Ù†ØªØ§Ø¬ | `main` | astroshan.vercel.app | Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù…Ø¨Ø§Ø´Ø±ÙˆÙ† |
| Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© | `develop` | develop-*.vercel.app | Staging |
| Ø§Ù„Ù…ÙŠØ²Ø© | `feature/*` | [branch]-*.vercel.app | Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù€ PR |

---

## ğŸ” Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© (Environment Variables)

### Ø§Ù„ÙØ¦Ø§Øª

**Ø¹Ø§Ù…Ø© (NEXT_PUBLIC_*):**
```bash
NEXT_PUBLIC_APP_URL=https://astroshan.vercel.app
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=your-cloud
```

**Ù„Ù„Ø®Ø§Ø¯Ù… ÙÙ‚Ø· (Server-only):**
```bash
MONGODB_URI=mongodb+srv://...
JWT_SECRET=...
GOOGLE_CLIENT_ID=...
```

### Ù…Ù…Ø§Ø±Ø³Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†

- âœ… Ø§Ù„Ø£Ø³Ø±Ø§Ø± ÙÙŠ Vercel Environment Variables
- âœ… Ø£Ø³Ø±Ø§Ø± Ù…Ø®ØªÙ„ÙØ© Ù„ÙƒÙ„ Ø¨ÙŠØ¦Ø©
- âœ… Ù„Ø§ Ø£Ø³Ø±Ø§Ø± ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ (Repo)
- âœ… ØªÙ†Ù‚ÙŠØ­ ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„Ø§Øª (Logs)

---

## ğŸ›¡ï¸ ØªØ±ÙˆÙŠØ³Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù† (Security Headers)

```typescript
const securityHeaders = [
  { key: "Strict-Transport-Security", value: "max-age=63072000; includeSubDomains" },
  { key: "X-Content-Type-Options", value: "nosniff" },
  { key: "Referrer-Policy", value: "strict-origin-when-cross-origin" },
  { key: "Permissions-Policy", value: "camera=(), microphone=()" }
];
```

---

## ğŸ—„ï¸ Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### MongoDB Atlas

| Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ | Ø§Ù„Ù‚ÙŠÙ…Ø© |
|:-------:|:------|
| Ø§Ù„Ù…Ø³ØªÙˆÙ‰ (Tier) | M0 (Ù…Ø¬Ø§Ù†ÙŠ) |
| Ø§Ù„Ø¥ØµØ¯Ø§Ø± | MongoDB 7.0 |
| Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ | ÙŠÙˆÙ…ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ |

### ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª (Connection Pooling)

```typescript
// Serverless-safe singleton
if (process.env.NODE_ENV === 'development') {
  if (!global._mongoClientPromise) {
    global._mongoClientPromise = new MongoClient(uri).connect();
  }
  clientPromise = global._mongoClientPromise;
} else {
  clientPromise = new MongoClient(uri).connect();
}
```

---

## ğŸ”„ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ±Ø§Ø¬Ø¹ (Rollback Procedures)

### ØªØ±Ø§Ø¬Ø¹ ÙÙˆØ±ÙŠ (Instant Rollback)

1. Ø§Ø°Ù‡Ø¨ Ù„Ù€ Vercel Dashboard â†’ Deployments
2. Ø¬Ø¯ Ø¢Ø®Ø± Ù†Ø´Ø± ÙŠØ¹Ù…Ù„
3. Ø§Ø¶ØºØ· "..." â†’ "Promote to Production"

**Ø§Ù„ÙÙˆØ§Ø¦Ø¯:**
- âš¡ ÙŠØ³ØªØºØ±Ù‚ Ø«ÙˆØ§Ù†ÙŠ (Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡)
- ğŸ“¦ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚ Ù„Ø§ ÙŠØ²Ø§Ù„ Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
- ğŸ” ÙŠÙ…ÙƒÙ† Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª Ø¬Ù†Ø¨Ø§Ù‹ Ø¥Ù„Ù‰ Ø¬Ù†Ø¨

### Ø§Ù„Ø·ÙˆØ§Ø±Ø¦

```bash
git revert HEAD
git push origin main
# Ù†Ø´Ø± Ø¬Ø¯ÙŠØ¯ ÙŠØ¨Ø¯Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
```

---

## ğŸ“ˆ Ø§Ø¹ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªÙˆØ³Ø¹ (Scaling Considerations)

| Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ | Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ | Ø§Ù„Ø­Ø§Ù„ÙŠ |
|:---------|:-----:|:-------:|
| Ø¯ÙˆØ§Ù„ Serverless | 100 Ù…ØªØ²Ø§Ù…Ù† | Ù…Ù†Ø®ÙØ¶ |
| Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø·Ø§Ù‚ (Bandwidth) | 100GB/Ø´Ù‡Ø± | Ù…Ù†Ø®ÙØ¶ |
| Ø²Ù…Ù† Ø§Ù„Ø¨Ù†Ø§Ø¡ | 45 Ø¯Ù‚ÙŠÙ‚Ø© | ~2 Ø¯Ù‚ÙŠÙ‚Ø© |
| Ø§ØªØµØ§Ù„Ø§Øª MongoDB | 500 | Ù…Ù†Ø®ÙØ¶ |

---

## ğŸ“ Ø¯Ø±ÙˆØ³ DevOps Ø§Ù„Ù…Ø³ØªÙØ§Ø¯Ø©

1. **Serverless ÙŠØ¨Ø³Ø· Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª** - Ù„Ø§ Ø¥Ø¯Ø§Ø±Ø© Ø®ÙˆØ§Ø¯Ù…
2. **Ù†Ø´Ø±Ø§Øª Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ù„Ø§ ØªÙ‚Ø¯Ø± Ø¨Ø«Ù…Ù†** - ÙƒÙ„ PR ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø·
3. **ØªÙƒØ§ÙØ¤ Ø§Ù„Ø¨ÙŠØ¦Ø§Øª Ù…Ù‡Ù…** - Ù†ÙØ³ Ø§Ù„ØªÙƒÙˆÙŠÙ† ÙÙŠ ÙƒÙ„ Ù…ÙƒØ§Ù†
4. **Ø§Ù„Ù†Ø´Ø±Ø§Øª ØºÙŠØ± Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØºÙŠÙŠØ± ØªØ¹Ø·ÙŠ Ø§Ù„Ø«Ù‚Ø©** - ØªØ±Ø§Ø¬Ø¹ ÙÙˆØ±ÙŠ

---

<div align="center">
<img width="600" src="https://raw.githubusercontent.com/andreasbm/readme/master/assets/lines/rainbow.png"/>
</div>

## ğŸ”— ÙˆØ«Ø§Ø¦Ù‚ Ø°Ø§Øª ØµÙ„Ø©

<div align="center">

| Ø§Ù„ØªÙ†Ù‚Ù„ |
|:----------:|
| [ğŸ§ª â† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ§Ù„Ø¬ÙˆØ¯Ø©](08-testing-quality.md) |
| [ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù„Ø£Ø«Ø± â†’](10-results-impact.md) |

</div>

<div align="center">

[![Prev: Testing & Quality](https://img.shields.io/badge/â†_Prev:_Testing_%26_Quality-1eb8e4?style=for-the-badge)](08-testing-quality.md) [![Next: Results & Impact](https://img.shields.io/badge/Next:_Results_%26_Impact_â†’-7565e3?style=for-the-badge)](10-results-impact.md)

</div>
